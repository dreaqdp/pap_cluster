\subsection{Xarxa d'interconnexió}

Entenent que tenim un nombre relativament reduït d'unitats i que volem dedicar tantes unitats com 
sigui possible a nodes de còmput, volem reduir el nombre d'unitats que dediquem als commutadors. Per aconseguir aquesta fita, necessitem que cada commutador tingui el màxim
nombre de ports per unitat.
Com efecte col·lateral d'aquesta estratègia ens veiem amb un sistema que pràcticament es veu forçat a utilitzar una tipologia de xarxa de tipus malla.

Pel que fa a distribuïdors, ens vam centrar en \textit{Mallanox Technologies}. A la pàgina web
\cite{mellanox-web} de la companyia, vam trobar commutadors \textit{InfiniBand} de diferents preus
i velocitats (com més ports major és la velocitat). A la taula \ref{tab:intercon} hem recollit els 
diferents models candidats a ser utilitzats en el nostre sistema.

\begin{table}[H]
\begin{adjustwidth}{-.5in}{-.5in}  
    \begin{center}
        \centering
        \scalebox{1.0}{
        \begin{centering}
            \begin{tabular}{l||c|c|c}
                \hline
                \cellcolor[HTML]{FFFFFF}Model         & Ports & Speed (Gb/s) & Preu (\$) \\ \hline \hline \rowcolor[HTML]{EFEFEF}
                MSX6012F-2BFS\cite{mellanox_msx6012f-2bfs} & 12      & 56           &  9309.00  \\ 
                MSX6018F-1SFS\cite{mellanox_msx6018f-1sfs} & 18      & 56           & 14791.00  \\ \rowcolor[HTML]{EFEFEF} 
                MSB7800-ES2F\cite{mellanox_msb7800-es2f}  & 36      & 100          & 25633.00  \\ 
                MQM8700-HS2F\cite{mellanox_mqm8700-hs2f}  & 40      & 200          & 29629.00  \\ \hline
            \end{tabular}
        \end{centering}
        }
    \caption{Comparació entre les diferents configuracions dels nodes.}
    \label{tab:intercon}
    \end{center}
\end{adjustwidth}
\end{table}

La quantitat de commutadors que utilitzem en el nostre sistema és un factor clau que marca,
tan el preu, com el rendiment, d'aquest. D'altre banda, però, afecta diferent als dos paràmetres,
anteriors en funció dels altres components. Per tan no podem determinar encara quina serà la
millor configuració. No obstant, si que podem reduir el rang de configuracions, per tal que
l'anàlisi sigui més amè.

Ja que utilitzem una topologia de tipus malla completa, el nombre de connexions $C$ a nodes de comput
que podrà tenir la xarxa ve marcat per el nombre de ports $P$ del que disposa cada commutador així
com el nombre de commutadors $N$ que tingui el sistema. Es fàcil deduir que el nombre de connexions
que podrà haver-hi al sistema ve determinat per $C = N \times ( P - N + 1 ) = -N^2 + N(P+1)$.
A la figura \ref{fig:connections} podem veure quin es el comportament d'aquesta funció quan incrementem
el nombre de commutadors, aquesta figura consta del comportament dels commutadors, aixi com del nombre 
d'unitats que queden disponibles. Per el nostre sistema estudiarem aquelles configuracions que s'acosting 
mes a la linia de punts. Perque si estem massa aball de la linia de punts vol dir que estem perden conneccions
i que possiblement ens quedi espai lliure a l'armari. D'altre banda si estem massa amunt de la linia, 
significa que ja tenim les conneccions necesaries per omplir els dos armaris, i incrementar el nombre de conneccions
nomes ens portaria a desaprofitar-les ( asumim que minim una U per node).

Llabors a partir d'aquest argument podem desglossar les diferents configuracions que val la pena explorar.
\begin{itemize}
  \item El cas del model MSX6012F-2BFS, no l'analitzarem, ja que no hi ha cap configuració optima per la topologia utilitzada.
  \item Per el cas del model MSX6018F-1SFS, ja que tenim 18 ports, analitzarem les configuracions amb 6 i 7 commutadors.
  \item Per el cas del model MSB7800-ES2F, amb 36, centrarem l'analisis en les configuracions de 2 i 3 commutadors.
  \item Per el cas del model MQM8700-HS2F, amb 40, ens centrarem també en 2 i 3 commutadors.
\end{itemize}

\begin{figure}[h!]
    \centering
    \includegraphics[width=0.8\linewidth]{img/connections.png}
    \caption{Caption}
    \label{fig:connections}
\end{figure}

