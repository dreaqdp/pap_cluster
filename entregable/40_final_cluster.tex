\section{Clúster final}
Veient les opcions presentades en les seccions anteriors,  hem decidit escollir la versió que ens dóna més TFlops. Aquesta és la que té nodes dual-socket amb el processador \textit{AMD EPYC 7502}. Hem escollit comprar els commutadors de 40 ports, ja que ens ofereixen el doble de velocitat que els de 36 (200 Gbits i 100 Gbits respectivament).

Podem veure que el percentatge de TFlops de les gràfiques respecte el total és 0.289. Aquest número s'aconsegueix amb 12 GPUs \textit{AMD Radeon Instinc MI50}, posant 6 en dos nodes. Com els nodes tenen 8 slots per gràfiques (PCIe de 16 lanes), podríem afegir 4 targetes gràfiques amb menys TFlops i intentar apropar-nos més al 30\% de TFlops de GPU que ens imposa la restricció.

Per fer-ho, afegim quatre gràfiques \textit{AMD Radeon Pro WX8200}, afegint 2.625 TFlops al nostre clúster. El preu s'incrementa en 3879.96 \$ i el ràtio de \texttt{TFlops GPU/Total} acaba sent 0.296.

Més concretament, aquesta és la configuració que hem escollit:
\begin{table}[H]
\begin{adjustwidth}{-1.0in}{-1.0in}
\begin{center}
\begin{tabular}{l|l}
\hline
    {\cellcolor[HTML]{EFEFEF}CPU}         & {\cellcolor[HTML]{EFEFEF}Dual-socket AMD EPYC Rome 7502P \cite{cpu_amd_7502_buy}} \\ 
Cores/Node                                       & 128                                             \\ 
    {\cellcolor[HTML]{EFEFEF}GPU\_1}                       & {\cellcolor[HTML]{EFEFEF}AMD Radeon Instinct MI50 \cite{gpu_mi50}} \\ 
\#GPU\_1                                           & 12 (2 nodes amb 6 GPUs)                         \\
    {\cellcolor[HTML]{EFEFEF}GPU\_2}                       & {\cellcolor[HTML]{EFEFEF}AMD Radeon Pro WX8200 \cite{gpu_pro_8200}} \\ 
\#GPU\_2                                           & 4 (2 nodes amb 2 GPUs)                         \\
    {\cellcolor[HTML]{EFEFEF}Memòria}     & {\cellcolor[HTML]{EFEFEF}Kingston KSM29RS4 DDR4 2933Hz \cite{mem2}}   \\
{\color[HTML]{000000}Memòries/node}             & {\color[HTML]{000000}8 DIMMS de 16GB}          \\ 
    {\cellcolor[HTML]{EFEFEF}Commutadors} & {\cellcolor[HTML]{EFEFEF}Mellanox MQM8700-HS2F, 200Gbits \cite{mellanox_mqm8700-hs2f}} \\ 
{\color[HTML]{000000}\#Commutadors}             & {\color[HTML]{000000}3}                        \\ 
{\cellcolor[HTML]{EFEFEF}\#Nodes sense GPU (1U)}    & {\cellcolor[HTML]{EFEFEF}77}                       \\
{\color[HTML]{000000}\#Nodes amb GPU (2U)}      & {\color[HTML]{000000}2}                        \\
{\cellcolor[HTML]{EFEFEF}Us de nodes}               & {\cellcolor[HTML]{EFEFEF}81}                       \\
{\color[HTML]{000000}Us de nodes + commutadors} & {\color[HTML]{000000}84}                       \\ \hline
{\cellcolor[HTML]{EFEFEF}TFlops CPU}                & {\cellcolor[HTML]{EFEFEF}197.5}                    \\
{\color[HTML]{000000}TFlops GPU}                & {\color[HTML]{000000}83.085}                    \\ 
{\cellcolor[HTML]{EFEFEF}TFlops Totals}             & {\cellcolor[HTML]{EFEFEF}280.585}                   \\ 
{\color[HTML]{000000}TFlops GPU/Totals}         & {\color[HTML]{000000} 0.296}                    \\ 
{\cellcolor[HTML]{EFEFEF}Cost (Dòllars)}                 & {\cellcolor[HTML]{EFEFEF}1127027.41}              \\
{\color[HTML]{000000}GFlops/Dòllar}               & {\color[HTML]{000000}0.255}                    \\
    \rowcolor[HTML]{EFEFEF}
Power dissipation total & TODO \\
    Energy efficiency & TODO \\ \hline
\end{tabular}
\caption{Configuració final del clúster.}
\end{center}
\end{adjustwidth}
\end{table}




\subsection{Roofline}



